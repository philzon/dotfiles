#!/bin/bash

FILE=$1

if [ -z "$FILE" ]
then
	FILE=".history"
fi

touch "$FILE"

while IFS= read -r LINE
do
	STATUS=$(echo "$LINE" | awk '{print $1}')
	TIME="\e[33m$(echo $LINE | awk '{print $2}')"
	DURATION="\e[90m$(echo $LINE | awk '{print $3}')"
	COMMAND="\e[39m$(echo $LINE | awk '{print $4}')"

	if [ "$STATUS" == "0" ]
	then
		STATUS="\e[92m*"
	else
		STATUS="\e[91m!"
	fi

	echo -e "$STATUS $TIME $DURATION $COMMAND"
done < "$FILE"
